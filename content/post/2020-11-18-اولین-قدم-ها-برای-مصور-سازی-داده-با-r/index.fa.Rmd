---
title: اولین قدم‌ها برای مصور سازی داده با R
author: بهمن اجدری
date: '2020-11-18'
slug: []
categories:
  - R
tags:
  - Data Visualization
---

# مصور سازی داده با کتابخانه ggplot2

کتابخانه‌ها از اجزای اصلی محیط برنامه‌نویسی R هستند. با استفاده از این کتابخانه‌ها کاربران می‌توانند به توابع از پیش تعریف شده‌ای دست پیدا کنند که کار بررسی و تحلیل را برای آن‌ها ساده‌تر می‌کند. 
مصور سازی داده یکی از قدرتمند‌ترین توانایی‌های زبان R است که معمولاً با استفاده از کتابخانه ggplot2  صورت می‌گیرد. برای نصب این کتابخانه میتوان از دستور زیر استفاده کرد.

```{r eval=FALSE}
#install.packages("ggplot2")
```

تنها کافی است که یکبار کتابخانه را نصب کرد و برای دفعات بعد تنها کافی است آن را با استفاده از دستور زیر فراخوانی کرد.

```{r}
library(ggplot2)
```

# معرفی مجموعه داده mpg

این مجموعه داده برای تمرین بصورت پیش‌فرض در کتابخانه ggplot2 قرار داده شده است. این مجموعه داده حاوی اطلاعاتی در خصوص مصرف سوخت ۳۸ مدل از اتوموبیل‌های معروف است که بین سال‌های 1998 تا 2008 میلادی جمع آوری شده است. برای دیدن داده‌های موجود در این دیتاست کافی است نام آن را تایپ کنید و کنترل و اینتر را فشار دهید.

# اولین مصورسازی در R

فرض کنید می‌خواهیم مقایسه‌ای داشته باشیم برای رابطه میان حجم موتور و میزان مصرف سوخت. باور ما این است که با افزایش حجم موتور میزان مصرف سوخت نیز افزایش می‌یابد. می‌خواهیم اطمینان پیدا کنیم که آیا داده‌های جمع آوری شده نیز همین مطلب را تأیید می‌کند یا خیر. رسم نمودار ساده‌ترین روش برای این اطمینان بخشی است  

برای رسم هر نوع نموداری لازم است سه چیز را برای R مشخص کنید.  

۱.دیتاست یا همان مجموعه داده مورد نظر ( در اینجا mpg)  

۲.محور X (در اینجا حجم موتور)  

۳.محور Y (در اینجا میزان مصرف سوخت)    

# نمایش مجموعه داده 

برای مشاهده اطلاعات درون دیتاست کافی است نام دیتاست را تایپ کنید و کنترل اینتر را فشار دهید.

```{r}
mpg
```

همانطور که مشاهده میکنید این دیتاست حاوی ستون‌های متفاوتی است. ستون displ نشاندهنده حجم موتور و ستون hwy نشان دهنده میزان مصرف در اتوبان است. 

با استفاده از تایپ دستور زیر و فشار دادن کنترل اینتر نمودار مورد نظر را در دست خواهید داشت.

```{r fig.align='center'}
ggplot(data = mpg)+
  geom_point(mapping = aes(x=displ, y=hwy))
```

# ساختار کلی ggplot2

رسم نمودار با کتابخانه ggplot2 دارای یک ساختار ثابت بصورت زیر است:

```{r eval=FALSE}
ggplot(data = <DATA>)+
	<GEOM_FUNCTION>(mapping = aes(<MAPPING>))
```

این دستور به R میفهماند که محور‌های x و y ، که همیشه در میان aes قرار می‌گیرند، چطور در نمودار تعریف می‌شوند.   

# اضافه کردن متغیر سوم به نمودار

اضافه کردن متغیر سوم به نمودار باعث شفافیت بیشتر و ارایه اطلاعات اضافه می‌شود. شما می‌توانید متغیر‌های جدیدی مانند تفکیک بر اساس رنک، شکل و یا حتی اندازه را به نمودار خود اضافه کنید.

```{r fig.align='center', dpi=300}
ggplot(data=mpg)+
     geom_point(mapping=aes(x = displ, y = hwy, color = class))
```

# تمرین برای شما

آیا افزایش حجم موتور باعث افزایش مصرف سوخت می‌شود؟

