---
title: اولین قدم‌ها برای مصور سازی داده با R
author: بهمن اجدری
date: '2020-11-18'
slug: []
categories:
  - R
tags:
  - Data Visualization
---



<div id="مصور-سازی-داده-با-کتابخانه-ggplot2" class="section level1">
<h1>مصور سازی داده با کتابخانه ggplot2</h1>
<p>کتابخانه‌ها از اجزای اصلی محیط برنامه‌نویسی R هستند. با استفاده از این کتابخانه‌ها کاربران می‌توانند به توابع از پیش تعریف شده‌ای دست پیدا کنند که کار بررسی و تحلیل را برای آن‌ها ساده‌تر می‌کند.
مصور سازی داده یکی از قدرتمند‌ترین توانایی‌های زبان R است که معمولاً با استفاده از کتابخانه ggplot2 صورت می‌گیرد. برای نصب این کتابخانه میتوان از دستور زیر استفاده کرد.</p>
<pre class="r"><code>#install.packages(&quot;ggplot2&quot;)</code></pre>
<p>تنها کافی است که یکبار کتابخانه را نصب کرد و برای دفعات بعد تنها کافی است آن را با استفاده از دستور زیر فراخوانی کرد.</p>
<pre class="r"><code>library(ggplot2)</code></pre>
</div>
<div id="معرفی-مجموعه-داده-mpg" class="section level1">
<h1>معرفی مجموعه داده mpg</h1>
<p>این مجموعه داده برای تمرین بصورت پیش‌فرض در کتابخانه ggplot2 قرار داده شده است. این مجموعه داده حاوی اطلاعاتی در خصوص مصرف سوخت ۳۸ مدل از اتوموبیل‌های معروف است که بین سال‌های 1998 تا 2008 میلادی جمع آوری شده است. برای دیدن داده‌های موجود در این دیتاست کافی است نام آن را تایپ کنید و کنترل و اینتر را فشار دهید.</p>
</div>
<div id="اولین-مصورسازی-در-r" class="section level1">
<h1>اولین مصورسازی در R</h1>
<p>فرض کنید می‌خواهیم مقایسه‌ای داشته باشیم برای رابطه میان حجم موتور و میزان مصرف سوخت. باور ما این است که با افزایش حجم موتور میزان مصرف سوخت نیز افزایش می‌یابد. می‌خواهیم اطمینان پیدا کنیم که آیا داده‌های جمع آوری شده نیز همین مطلب را تأیید می‌کند یا خیر. رسم نمودار ساده‌ترین روش برای این اطمینان بخشی است</p>
<p>برای رسم هر نوع نموداری لازم است سه چیز را برای R مشخص کنید.</p>
<p>۱.دیتاست یا همان مجموعه داده مورد نظر ( در اینجا mpg)</p>
<p>۲.محور X (در اینجا حجم موتور)</p>
<p>۳.محور Y (در اینجا میزان مصرف سوخت)</p>
</div>
<div id="نمایش-مجموعه-داده" class="section level1">
<h1>نمایش مجموعه داده</h1>
<p>برای مشاهده اطلاعات درون دیتاست کافی است نام دیتاست را تایپ کنید و کنترل اینتر را فشار دهید.</p>
<pre class="r"><code>mpg</code></pre>
<pre><code>## # A tibble: 234 x 11
##    manufacturer model    displ  year   cyl trans   drv     cty   hwy fl    class
##    &lt;chr&gt;        &lt;chr&gt;    &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt;   &lt;chr&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;
##  1 audi         a4         1.8  1999     4 auto(l… f        18    29 p     comp…
##  2 audi         a4         1.8  1999     4 manual… f        21    29 p     comp…
##  3 audi         a4         2    2008     4 manual… f        20    31 p     comp…
##  4 audi         a4         2    2008     4 auto(a… f        21    30 p     comp…
##  5 audi         a4         2.8  1999     6 auto(l… f        16    26 p     comp…
##  6 audi         a4         2.8  1999     6 manual… f        18    26 p     comp…
##  7 audi         a4         3.1  2008     6 auto(a… f        18    27 p     comp…
##  8 audi         a4 quat…   1.8  1999     4 manual… 4        18    26 p     comp…
##  9 audi         a4 quat…   1.8  1999     4 auto(l… 4        16    25 p     comp…
## 10 audi         a4 quat…   2    2008     4 manual… 4        20    28 p     comp…
## # … with 224 more rows</code></pre>
<p>همانطور که مشاهده میکنید این دیتاست حاوی ستون‌های متفاوتی است. ستون displ نشاندهنده حجم موتور و ستون hwy نشان دهنده میزان مصرف در اتوبان است.</p>
<p>با استفاده از تایپ دستور زیر و فشار دادن کنترل اینتر نمودار مورد نظر را در دست خواهید داشت.</p>
<pre class="r"><code>ggplot(data = mpg)+
  geom_point(mapping = aes(x=displ, y=hwy))</code></pre>
<p><img src="/post/2020-11-18-اولین-قدم-ها-برای-مصور-سازی-داده-با-r/index.fa_files/figure-html/unnamed-chunk-4-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="ساختار-کلی-ggplot2" class="section level1">
<h1>ساختار کلی ggplot2</h1>
<p>رسم نمودار با کتابخانه ggplot2 دارای یک ساختار ثابت بصورت زیر است:</p>
<pre class="r"><code>ggplot(data = &lt;DATA&gt;)+
    &lt;GEOM_FUNCTION&gt;(mapping = aes(&lt;MAPPING&gt;))</code></pre>
<p>این دستور به R میفهماند که محور‌های x و y ، که همیشه در میان aes قرار می‌گیرند، چطور در نمودار تعریف می‌شوند.</p>
</div>
<div id="اضافه-کردن-متغیر-سوم-به-نمودار" class="section level1">
<h1>اضافه کردن متغیر سوم به نمودار</h1>
<p>اضافه کردن متغیر سوم به نمودار باعث شفافیت بیشتر و ارایه اطلاعات اضافه می‌شود. شما می‌توانید متغیر‌های جدیدی مانند تفکیک بر اساس رنک، شکل و یا حتی اندازه را به نمودار خود اضافه کنید.</p>
<pre class="r"><code>ggplot(data=mpg)+
     geom_point(mapping=aes(x = displ, y = hwy, color = class))</code></pre>
<p><img src="/post/2020-11-18-اولین-قدم-ها-برای-مصور-سازی-داده-با-r/index.fa_files/figure-html/unnamed-chunk-6-1.png" width="2100" style="display: block; margin: auto;" /></p>
</div>
<div id="تمرین-برای-شما" class="section level1">
<h1>تمرین برای شما</h1>
<p>آیا افزایش حجم موتور باعث افزایش مصرف سوخت می‌شود؟</p>
</div>
